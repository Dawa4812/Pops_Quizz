{% extends 'base.html' %}

{% load static %}

{% block content %}
	<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 background_body typo_generale">
		<h1>{{ game.name }}</h1>
	  	<h3>{{ game.form.name }}</h3>

	  	{% if game.form.author is not None %}
	  		<h6>Créé par {{ game.form.author.login }}</h6>
	  	{% else %}
	  		<h6>Créé par teampopsquizz</h6>
	  	{% endif %}


  		<form id="form_answers" action="{% url 'Quizz:resultats' game.uuid %}" method="post">

  			{% csrf_token %}
  			<input type="hidden" name="idplayer" id="idplayer" value="{{ player.id }}">
			<!-- TODO Calculer le score en Ajax -->
			<input type="hidden" name="scoreplayer" id="scoreplayer" value="0">
			<h2 id="score-affichage" hidden>Vous avez eu un score de 0</h2>

			{% for q in game.form.questions %}
				
				<fieldset class="fdst_border"><legend class="lgd_style">{{ q.question.label }}</legend>
					<div class="row">

						{% if q.question.answer_type.type == "INPUT" %}

					  	{% for a in q.answers %}
						  	<div class="col">
								<input type="text" class="form-control style_form" id="answer{{ a.id }}" name="answer{{ a.id }}" placeholder="">
						  	</div>
					  	{% empty %}
							Pas de réponse
						{% endfor %}

						{% elif q.question.answer_type.type == "QCM" %}

							{% for a in q.answers %}
							  	<div class="col">
							  		<div class="form-check">
								  		<input class="form-check-input" type="checkbox" id="answer{{ a.id }}" name="answer{{ a.id }}">
								        <label class="form-check-label" for="answer{{ a.id }}">{{ a.value }}</label>
							    	</div>
							  	</div>
						  	{% empty %}
								Pas de réponse
							{% endfor %}


						{% elif q.question.answer_type.type == "UNIQUE_ANSWER" %}

							{% for a in q.answers %}
					  	<div class="col">

					  		<div class="form-check">
					  		
								<input class="form-check-input" type="radio" name="qradio{{ q.question.id }}" id="answer{{ a.id }}" value="{{ a.id }}">
					      		<label class="form-check-label" for="answer{{ a.id }}">
					            {{ a.value }}
					      		</label>

					      	</div>
							
					  	</div>
					  	{% empty %}
							Pas de réponse
						{% endfor %}


						{% else %}

						Type non pris en charge
						
						{% endif %}

					</div>
				
				
				</fieldset>
			{% empty %}
				Pas de questions
			{% endfor %}

			<br>
			<div class="droite">
				<button type="button" id="subbtn" class="btn connectBtn">VALIDER</button>
				<button type="reset" id="resbtn" class="btn connectBtn">ANNULER</button>
				<button type="submit" id="resultbtn" class="btn connectBtn" hidden>VOIR LES RESULTATS</button>
			</div>

		</form>
	</div>
{% endblock %}

{% block js_per_page %}
<script type="text/javascript" src="{% static "js/gamerun.js"%}">
</script>
{% endblock %}
